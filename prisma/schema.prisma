// Dosya: prisma/schema.prisma
// (Tüm ana veri tabloları tutarlılık için manuel 'Int @id' kullanacak şekilde güncellendi)

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

// ========================================================================
// 1. ANA VERİ MODELLERİ (Tümü Int @id)
// ========================================================================

model Gender {
  genderId Int    @id // 1 = male, 2 = female, 3 = other, 4 = unknown
  key      String @unique @db.NVarChar(10)
  UserProfile     UserProfile[]
  ContentAudience ContentAudience[]
  WorkoutAsset    WorkoutAsset[]
}

model GoalType {
  goalTypeId   Int    @id
  key          String @unique @db.NVarChar(50)
  translations GoalTypeTranslation[]
  UserGoal     UserGoal[]
  WorkoutProgram WorkoutProgram[]
  ChallengeWorkoutPlanDay ChallengeWorkoutPlanDay[]
}

model BodyType {
  bodyTypeId   Int    @id
  key          String @unique @db.NVarChar(50)
  translations BodyTypeTranslation[]
  UserBody     UserBody[]
}

model ActivityLevel {
  activityLevelId Int    @id
  key             String @unique @db.NVarChar(50)
  translations    ActivityLevelTranslation[]
  UserBody        UserBody[]
}

model BodyTarget {
  bodyTargetId Int    @id
  key          String @unique @db.NVarChar(50)
  translations BodyTargetTranslation[]
  WorkoutProgram WorkoutProgram[]
  ChallengeWorkoutPlanDay ChallengeWorkoutPlanDay[]
}

model WorkoutType {
  workoutTypeId Int    @id
  key           String @unique @db.NVarChar(50)
  translations  WorkoutTypeTranslation[]
  Workout       Workout[]
}

model FitnessLevel {
  fitnessLevelId Int @id
  key            String @unique @db.NVarChar(50)
  translations     FitnessLevelTranslation[]
  UserBody         UserBody[]
  WorkoutProgram   WorkoutProgram[]
  ChallengeWorkoutPlan ChallengeWorkoutPlan[]
  ContentAudience  ContentAudience[]
}

// ========================================================================
// 2. KULLANICI VE KİMLİK DOĞRULAMA MODELLERİ (Bunlar UUID olarak kalır)
// ========================================================================

model User {
  userId          String   @id @default(uuid()) @db.UniqueIdentifier
  username        String   @unique @db.NVarChar(100)
  email           String   @unique @db.NVarChar(255)
  isEmailVerified Boolean  @default(false)
  createdAt       DateTime @default(now())

  // --- İlişkiler ---
  EmailVerificationToken EmailVerificationToken[]
  PasswordResetToken     PasswordResetToken[]
  RefreshToken           RefreshToken[]
  UserExternalLogin      UserExternalLogin[]
  UserLocalCredential    UserLocalCredential?
  Profile           UserProfile?
  Body              UserBody?
  Goal              UserGoal?
  Setting           UserSetting?
  ProgramPreference UserProgramPreference?
  HealthLimitation  UserHealthLimitation[]
  TargetBodyPart    UserGoalPart[]
  AvailableEquipment UserAvailableWorkoutEquipment[]
  WorkoutLocation   UserWorkoutLocation[]

  // 1:N Kullanıcı İçeriği
  ProgramAssignment UserProgramAssignment[]
  ChallengeProgress UserChallengePlan[]
  GeneratedProgram  WorkoutProgram[]      @relation("UserGeneratedPrograms")
}

model UserLocalCredential {
  userId       String @id @db.UniqueIdentifier
  passwordHash String @db.NVarChar(Max)
  User         User   @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserExternalLogin {
  id            Int    @id @default(autoincrement())
  loginProvider String @db.NVarChar(50)
  providerKey   String @db.NVarChar(255)
  userId        String @db.UniqueIdentifier
  User          User   @relation(fields: [userId], references: [userId], onDelete: Cascade)
  @@unique([loginProvider, providerKey])
}

model RefreshToken {
  refreshTokenId Int      @id @default(autoincrement())
  tokenHash      String   @unique @db.NVarChar(256)
  deviceId       String   @db.NVarChar(255)
  expiresAt      DateTime
  isUsed         Boolean  @default(false)
  createdAt      DateTime @default(now())
  createdByIP    String   @db.NVarChar(45)
  userAgent      String   @db.NVarChar(512)
  userId         String   @db.UniqueIdentifier
  User           User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  @@unique([userId, deviceId])
}

model EmailVerificationToken {
  verificationTokenId Int      @id @default(autoincrement())
  tokenHash           String   @db.NVarChar(256)
  expiresAt           DateTime
  isUsed              Boolean  @default(false)
  lastSentAt          DateTime @default(now())
  sendCount           Int      @default(1)
  requestIP           String   @db.NVarChar(45)
  userAgent           String   @db.NVarChar(512)
  failedAttempts      Int      @default(0)
  userId              String   @db.UniqueIdentifier
  User                User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model PasswordResetToken {
  resetTokenId   Int      @id @default(autoincrement())
  tokenHash      String   @db.NVarChar(256)
  expiresAt      DateTime
  isUsed         Boolean  @default(false)
  lastSentAt     DateTime @default(now())
  sendCount      Int      @default(1)
  requestIP      String   @db.NVarChar(45)
  userAgent      String   @db.NVarChar(512)
  failedAttempts Int      @default(0)
  userId         String   @db.UniqueIdentifier
  User           User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

// ========================================================================
// 3. KULLANICI PROFİL MODELLERİ (1:1 - Normalleştirildi)
// ========================================================================

model UserProfile {
  userId    String   @id @db.UniqueIdentifier
  firstName String   @db.NVarChar(100)
  lastName  String   @db.NVarChar(100)
  birthDate DateTime @db.Date
  genderId  Int?
  Gender    Gender?  @relation(fields: [genderId], references: [genderId])
  User      User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserBody {
  userId        String  @id @db.UniqueIdentifier
  heightCM      Decimal @db.Decimal(5, 2)
  weightKG      Decimal @db.Decimal(5, 2)
  activityLevelId Int?
  ActivityLevel   ActivityLevel? @relation(fields: [activityLevelId], references: [activityLevelId])
  bodyTypeId    Int?
  BodyType      BodyType?      @relation(fields: [bodyTypeId], references: [bodyTypeId])
  fitnessLevelId Int?
  FitnessLevel   FitnessLevel?  @relation(fields: [fitnessLevelId], references: [fitnessLevelId])
  User          User           @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserGoal {
  userId         String   @id @db.UniqueIdentifier
  targetWeightKG Decimal? @db.Decimal(5, 2)
  goalTypeId Int
  GoalType   GoalType @relation(fields: [goalTypeId], references: [goalTypeId])
  User           User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserSetting {
  userId            String @id @db.UniqueIdentifier
  preferredUnit     String @db.NVarChar(10)
  preferredLanguage String @db.NVarChar(10) @default("tr")
  theme             String @db.NVarChar(10) @default("system")
  User              User   @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserProgramPreference {
  userId          String  @id @db.UniqueIdentifier
  workoutDuration Int?
  startWithWarmup Boolean @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  User               User               @relation(fields: [userId], references: [userId], onDelete: Cascade)
  
  // DEĞİŞTİ: String? @db.UniqueIdentifier -> Int?
  workoutEquipmentId Int? 
  PreferredEquipment WorkoutEquipment?  @relation(fields: [workoutEquipmentId], references: [workoutEquipmentId])
}

// ========================================================================
// 4. KULLANICI İÇERİK MODELLERİ (Takvim, İlerleme - Soft Delete ile)
// ========================================================================

model UserProgramAssignment {
  id        Int       @id @default(autoincrement())
  dayOfWeek Int
  isRestDay Boolean   @default(false)
  deletedAt DateTime?

  userId    String   @db.UniqueIdentifier
  User      User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  
  // (Programın kendi ID'si UUID olarak kalıyor, bu doğru)
  programId String? @db.UniqueIdentifier 
  Program   WorkoutProgram? @relation(fields: [programId], references: [workoutProgramId], onDelete: SetNull, onUpdate: NoAction)

  @@unique([userId, dayOfWeek])
}

model UserChallengePlan {
  userChallengePlanId Int      @id @default(autoincrement())
  progressDay         Int      @default(1)
  status              String   @db.NVarChar(50) 
  startedAt           DateTime @default(now())
  lastActivityAt      DateTime @updatedAt
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  deletedAt           DateTime?

  userId          String               @db.UniqueIdentifier
  User            User                 @relation(fields: [userId], references: [userId], onDelete: Cascade)
  
  // (ChallengePlan'ın kendi ID'si UUID olarak kalıyor)
  challengePlanId String               @db.UniqueIdentifier 
  ChallengePlan   ChallengeWorkoutPlan @relation(fields: [challengePlanId], references: [challengePlanId], onDelete: Cascade)
}

// ========================================================================
// 5. GENEL İÇERİK ANA MODELLERİ (İçerik = UUID, Ana Veri = Int)
// ========================================================================

model ContentAudience {
  id             Int      @id @default(autoincrement())
  contentType    String   // "WorkoutProgram", "ChallengeWorkoutPlan", "HealthLimitation"
  
  // DEĞİŞTİ: contentId artık hem UUID (program için) hem de Int (limitasyon için) 
  // olabileceğinden, iki ayrı FK sütunu kullanmak en temizidir.
  // Ya da, contentType'a göre Int'e çevrilmiş bir String ID tutulur.
  // SQL Server'da bu zor. En basit çözüm: contentId'yi String tutmak.
  // Programlar için UUID, Ana Veri için Int'in String halini (örn: "1", "2") tutmak.
  contentId      String   @db.NVarChar(255) // DEĞİŞTİ (UUID -> NVarChar)
  
  // Kural Alanları
  genderId       Int?
  minAge         Int?
  maxAge         Int?
  fitnessLevelId Int?
  
  Gender       Gender?       @relation(fields: [genderId], references: [genderId])
  FitnessLevel FitnessLevel? @relation(fields: [fitnessLevelId], references: [fitnessLevelId])

  @@index([contentType, contentId])
}

// (WorkoutProgram, ChallengeWorkoutPlan, ChallengeWorkoutPlanDay UUID ID'de kalır)
model WorkoutProgram {
  workoutProgramId String   @id @default(uuid()) @db.UniqueIdentifier
  difficultyLevel  Int
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  deletedAt        DateTime?
  
  ownerUserId String? @db.UniqueIdentifier
  Owner User? @relation("UserGeneratedPrograms", fields: [ownerUserId], references: [userId], onDelete: NoAction, onUpdate: NoAction)
  
  goalTypeId       Int?
  GoalType         GoalType? @relation(fields: [goalTypeId], references: [goalTypeId])
  
  bodyTargetId     Int?
  BodyTarget       BodyTarget? @relation(fields: [bodyTargetId], references: [bodyTargetId])
  
  fitnessLevelId   Int?
  FitnessLevel     FitnessLevel? @relation(fields: [fitnessLevelId], references: [fitnessLevelId])

  translations      WorkoutProgramTranslation[]
  programAssignment UserProgramAssignment[]
}

model ChallengeWorkoutPlan {
  challengePlanId String   @id @default(uuid()) @db.UniqueIdentifier
  durationDays    Int
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  fitnessLevelId Int?
  FitnessLevel   FitnessLevel? @relation(fields: [fitnessLevelId], references: [fitnessLevelId])
  translations  ChallengeWorkoutPlanTranslation[]
  day           ChallengeWorkoutPlanDay[]
  userProgress  UserChallengePlan[]
}

model ChallengeWorkoutPlanDay {
  challengeWorkoutPlanDayId String   @id @default(uuid()) @db.UniqueIdentifier
  dayNumber                 Int
  isRestDay                 Boolean  @default(false)
  createdAt                 DateTime @default(now())
  updatedAt                 DateTime @updatedAt
  goalTypeId   Int?
  GoalType     GoalType? @relation(fields: [goalTypeId], references: [goalTypeId])
  bodyTargetId Int?
  BodyTarget   BodyTarget? @relation(fields: [bodyTargetId], references: [bodyTargetId])
  challengePlanId String               @db.UniqueIdentifier
  ChallengePlan   ChallengeWorkoutPlan @relation(fields: [challengePlanId], references: [challengePlanId], onDelete: Cascade)
  translations    ChallengeWorkoutPlanDayTranslation[]
  
  @@unique([challengePlanId, dayNumber])
}

model Workout {
  workoutId          String    @id @default(uuid()) @db.UniqueIdentifier
  effectivenessScore Decimal?  @db.Decimal(3, 2)
  metValue           Decimal?  @db.Decimal(4, 2)
  workoutTypeId      Int
  WorkoutType        WorkoutType @relation(fields: [workoutTypeId], references: [workoutTypeId])

  // DEĞİŞTİ: String? @db.UniqueIdentifier -> Int?
  workoutCategoryId  Int?
  Category           WorkoutCategory?  @relation(fields: [workoutCategoryId], references: [workoutCategoryId], onUpdate: NoAction, onDelete: NoAction)

  // DEĞİŞTİ: String? @db.UniqueIdentifier -> Int?
  workoutEquipmentId Int?
  Equipment          WorkoutEquipment? @relation(fields: [workoutEquipmentId], references: [workoutEquipmentId], onUpdate: NoAction, onDelete: NoAction)

  translations       WorkoutTranslation[]
  asset              WorkoutAsset[]
  targetMuscle       TargetMuscle[]
}

// DEĞİŞTİ: String @id -> Int @id
model WorkoutCategory {
  workoutCategoryId Int     @id
  categoryKey       String  @unique @db.NVarChar(100)
  movementPattern   String? @db.NVarChar(100)
  isCompound        Boolean @default(false)
  workout           Workout[]
  translations      WorkoutCategoryTranslation[]
}

model WorkoutAsset {
  assetId    String  @id @default(uuid()) @db.UniqueIdentifier
  assetPhoto String? @db.NVarChar(Max)
  assetVideo String? @db.NVarChar(Max)
  genderId  Int     @default(3)
  Gender    Gender  @relation(fields: [genderId], references: [genderId])
  workoutId String  @db.UniqueIdentifier
  Workout   Workout @relation(fields: [workoutId], references: [workoutId], onDelete: Cascade)
}

// DEĞİŞTİ: String @id -> Int @id
model Muscle {
  muscleId Int    @id
  workout      TargetMuscle[]
  translations MuscleTranslation[]
}

// DEĞİŞTİ: String @id -> Int @id
model HealthLimitation {
  healthLimitationId Int @id
  user         UserHealthLimitation[]
  translations HealthLimitationTranslation[]
}

// DEĞİŞTİ: String @id -> Int @id
model GoalBodyPart {
  goalBodyPartId Int @id
  user         UserGoalPart[]
  translations GoalBodyPartTranslation[]
}

// DEĞİŞTİ: String @id -> Int @id
model WorkoutEquipment {
  workoutEquipmentId Int @id
  user              UserAvailableWorkoutEquipment[]
  translations      WorkoutEquipmentTranslation[]
  workout           Workout[]
  userPreference    UserProgramPreference[]
}

// DEĞİŞTİ: String @id -> Int @id
model WorkoutLocation {
  workoutLocationId Int @id
  user         UserWorkoutLocation[]
  translations WorkoutLocationTranslation[]
}

// ========================================================================
// 6. TÜM ÇEVİRİ MODELLERİ (FK'lar güncellenmiş)
// ========================================================================

model GoalTypeTranslation {
  goalTypeId   Int
  languageCode String       @db.NVarChar(10)
  name         String       @db.NVarChar(100)
  description  String?      @db.NVarChar(Max)
  GoalType     GoalType     @relation(fields: [goalTypeId], references: [goalTypeId], onDelete: Cascade)
  @@id([goalTypeId, languageCode])
}
model BodyTypeTranslation {
  bodyTypeId   Int
  languageCode String       @db.NVarChar(10)
  name         String       @db.NVarChar(100)
  description  String?      @db.NVarChar(Max)
  BodyType     BodyType     @relation(fields: [bodyTypeId], references: [bodyTypeId], onDelete: Cascade)
  @@id([bodyTypeId, languageCode])
}
model ActivityLevelTranslation {
  activityLevelId Int
  languageCode    String        @db.NVarChar(10)
  name            String        @db.NVarChar(100)
  description     String?       @db.NVarChar(Max)
  ActivityLevel   ActivityLevel @relation(fields: [activityLevelId], references: [activityLevelId], onDelete: Cascade)
  @@id([activityLevelId, languageCode])
}
model BodyTargetTranslation {
  bodyTargetId Int
  languageCode String       @db.NVarChar(10)
  name         String       @db.NVarChar(100)
  description  String?      @db.NVarChar(Max)
  BodyTarget   BodyTarget   @relation(fields: [bodyTargetId], references: [bodyTargetId], onDelete: Cascade)
  @@id([bodyTargetId, languageCode])
}
model WorkoutTypeTranslation {
  workoutTypeId Int
  languageCode  String      @db.NVarChar(10)
  name          String      @db.NVarChar(100)
  description   String?     @db.NVarChar(Max)
  WorkoutType   WorkoutType @relation(fields: [workoutTypeId], references: [workoutTypeId], onDelete: Cascade)
  @@id([workoutTypeId, languageCode])
}
model FitnessLevelTranslation {
  fitnessLevelId Int
  languageCode   String       @db.NVarChar(10)
  name           String       @db.NVarChar(100)
  description    String?      @db.NVarChar(Max)
  FitnessLevel   FitnessLevel @relation(fields: [fitnessLevelId], references: [fitnessLevelId], onDelete: Cascade)
  @@id([fitnessLevelId, languageCode])
}
model WorkoutCategoryTranslation {
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  workoutCategoryId Int
  languageCode      String          @db.NVarChar(10)
  name              String          @db.NVarChar(100)
  description       String?         @db.NVarChar(Max)
  WorkoutCategory   WorkoutCategory @relation(fields: [workoutCategoryId], references: [workoutCategoryId], onDelete: Cascade)
  @@id([workoutCategoryId, languageCode])
}
model HealthLimitationTranslation {
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  healthLimitationId Int
  languageCode       String @db.NVarChar(10)
  name               String @db.NVarChar(100)
  description        String? @db.NVarChar(Max)
  HealthLimitation   HealthLimitation @relation(fields: [healthLimitationId], references: [healthLimitationId], onDelete: Cascade)
  @@id([healthLimitationId, languageCode])
}
model GoalBodyPartTranslation {
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  goalBodyPartId Int
  languageCode   String       @db.NVarChar(10)
  name           String       @db.NVarChar(100)
  description    String?      @db.NVarChar(Max)
  GoalBodyPart   GoalBodyPart @relation(fields: [goalBodyPartId], references: [goalBodyPartId], onDelete: Cascade)
  @@id([goalBodyPartId, languageCode])
}
model WorkoutEquipmentTranslation {
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  workoutEquipmentId Int
  languageCode       String           @db.NVarChar(10)
  name               String           @db.NVarChar(100)
  description        String?          @db.NVarChar(Max)
  WorkoutEquipment   WorkoutEquipment @relation(fields: [workoutEquipmentId], references: [workoutEquipmentId], onDelete: Cascade)
  @@id([workoutEquipmentId, languageCode])
}
model WorkoutLocationTranslation {
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  workoutLocationId Int
  languageCode      String          @db.NVarChar(10)
  name              String          @db.NVarChar(100)
  description       String?         @db.NVarChar(Max)
  WorkoutLocation   WorkoutLocation @relation(fields: [workoutLocationId], references: [workoutLocationId], onDelete: Cascade)
  @@id([workoutLocationId, languageCode])
}
model MuscleTranslation {
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  muscleId     Int
  languageCode String @db.NVarChar(10)
  name         String @db.NVarChar(100)
  Muscle       Muscle @relation(fields: [muscleId], references: [muscleId], onDelete: Cascade)
  @@id([muscleId, languageCode])
}

// (Bunlar UUID ID'li içeriklere bağlı kaldığı için DEĞİŞMEDİ)
model WorkoutTranslation {
  workoutId    String  @db.UniqueIdentifier
  languageCode String  @db.NVarChar(10)
  name         String  @db.NVarChar(255)
  description  String? @db.NVarChar(Max)
  Workout      Workout @relation(fields: [workoutId], references: [workoutId], onDelete: Cascade)
  @@id([workoutId, languageCode])
}
model WorkoutProgramTranslation {
  workoutProgramId String         @db.UniqueIdentifier
  languageCode     String         @db.NVarChar(10)
  name             String         @db.NVarChar(255)
  description      String?        @db.NVarChar(Max)
  WorkoutProgram   WorkoutProgram @relation(fields: [workoutProgramId], references: [workoutProgramId], onDelete: Cascade)
  @@id([workoutProgramId, languageCode])
}
model ChallengeWorkoutPlanTranslation {
  challengePlanId String               @db.UniqueIdentifier
  languageCode    String               @db.NVarChar(10)
  name            String               @db.NVarChar(255)
  description     String?              @db.NVarChar(Max)
  ChallengePlan   ChallengeWorkoutPlan @relation(fields: [challengePlanId], references: [challengePlanId], onDelete: Cascade)
  @@id([challengePlanId, languageCode])
}
model ChallengeWorkoutPlanDayTranslation {
  challengeWorkoutPlanDayId String                  @db.UniqueIdentifier
  languageCode              String                  @db.NVarChar(10)
  name                      String                  @db.NVarChar(255)
  description               String?                 @db.NVarChar(Max)
  ChallengeDay              ChallengeWorkoutPlanDay @relation(fields: [challengeWorkoutPlanDayId], references: [challengeWorkoutPlanDayId], onDelete: Cascade)
  @@id([challengeWorkoutPlanDayId, languageCode])
}

// ========================================================================
// 7. İLİŞKİ TABLOLARI (M:N Junction Tables - FK'lar güncellenmiş)
// ========================================================================

model UserHealthLimitation {
  userId             String   @db.UniqueIdentifier
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  healthLimitationId Int
  User               User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  HealthLimitation   HealthLimitation @relation(fields: [healthLimitationId], references: [healthLimitationId], onDelete: Cascade)
  @@id([userId, healthLimitationId])
}
model UserGoalPart {
  userId         String   @db.UniqueIdentifier
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  goalBodyPartId Int
  User           User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  GoalBodyPart   GoalBodyPart @relation(fields: [goalBodyPartId], references: [goalBodyPartId], onDelete: Cascade)
  @@id([userId, goalBodyPartId])
}
model UserAvailableWorkoutEquipment {
  userId             String   @db.UniqueIdentifier
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  workoutEquipmentId Int
  User               User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  WorkoutEquipment   WorkoutEquipment @relation(fields: [workoutEquipmentId], references: [workoutEquipmentId], onDelete: Cascade)
  @@id([userId, workoutEquipmentId])
}
model UserWorkoutLocation {
  userId            String   @db.UniqueIdentifier
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  workoutLocationId Int
  User              User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  WorkoutLocation   WorkoutLocation @relation(fields: [workoutLocationId], references: [workoutLocationId], onDelete: Cascade)
  @@id([userId, workoutLocationId])
}
model TargetMuscle {
  workoutId       String   @db.UniqueIdentifier // Workout ID (UUID)
  // DEĞİŞTİ: String @db.UniqueIdentifier -> Int
  muscleId        Int // Muscle ID (Int)
  targetIntensity Int?
  Workout         Workout  @relation(fields: [workoutId], references: [workoutId], onDelete: Cascade)
  Muscle          Muscle   @relation(fields: [muscleId], references: [muscleId], onDelete: Cascade)
  @@id([workoutId, muscleId])
}