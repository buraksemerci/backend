// Dosya: prisma/schema.prisma
// (Analiz 2b, 2e, 3b, UUID'ler ve Soft Delete dahil TÜM geliştirmeleri içeren NİHAİ SÜRÜM)

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

// ========================================================================
// 1. ANA VERİ MODELLERİ (Normalizasyon için [Öneri 2b])
// ========================================================================

model Gender {
  genderId Int    @id // 1 = male, 2 = female, 3 = other, 4 = unknown (Öneri 2e)
  key      String @unique @db.NVarChar(10)

  // İlişkiler
  UserProfile     UserProfile[]
  ContentAudience ContentAudience[]
  WorkoutAsset    WorkoutAsset[]
}

model GoalType {
  goalTypeId   Int    @id @default(autoincrement())
  key          String @unique @db.NVarChar(50) // "weight_loss", "muscle_gain"
  translations GoalTypeTranslation[]
  UserGoal     UserGoal[]
  WorkoutProgram WorkoutProgram[]
  ChallengeWorkoutPlanDay ChallengeWorkoutPlanDay[]
}

model BodyType {
  bodyTypeId   Int    @id @default(autoincrement())
  key          String @unique @db.NVarChar(50) // "ectomorph"
  translations BodyTypeTranslation[]
  UserBody     UserBody[]
}

model ActivityLevel {
  activityLevelId Int    @id @default(autoincrement())
  key             String @unique @db.NVarChar(50) // "sedentary"
  translations      ActivityLevelTranslation[]
  UserBody          UserBody[]
}

model BodyTarget {
  bodyTargetId Int    @id @default(autoincrement())
  key          String @unique @db.NVarChar(50) // "full_body", "upper_body"
  translations BodyTargetTranslation[]
  WorkoutProgram WorkoutProgram[]
  ChallengeWorkoutPlanDay ChallengeWorkoutPlanDay[]
}

model WorkoutType {
  workoutTypeId Int    @id @default(autoincrement())
  key           String @unique @db.NVarChar(50) // "reps", "duration"
  translations  WorkoutTypeTranslation[]
  Workout       Workout[]
}

model FitnessLevel {
  fitnessLevelId Int @id @default(autoincrement()) // 1 = beginner, 2 = intermediate, 3 = advanced
  key            String @unique @db.NVarChar(50)
  translations     FitnessLevelTranslation[]
  UserBody         UserBody[]
  WorkoutProgram   WorkoutProgram[]
  ChallengeWorkoutPlan ChallengeWorkoutPlan[]
  ContentAudience  ContentAudience[]
}

// ========================================================================
// 2. KULLANICI VE KİMLİK DOĞRULAMA MODELLERİ
// ========================================================================

model User {
  userId          String   @id @default(uuid()) @db.UniqueIdentifier
  username        String   @unique @db.NVarChar(100)
  email           String   @unique @db.NVarChar(255)
  isEmailVerified Boolean  @default(false)
  createdAt       DateTime @default(now())

  // --- İlişkiler ---
  EmailVerificationToken EmailVerificationToken[]
  PasswordResetToken     PasswordResetToken[]
  RefreshToken           RefreshToken[]
  UserExternalLogin      UserExternalLogin[]
  UserLocalCredential    UserLocalCredential?

  // 1:1 Profil (Normalleştirildi)
  Profile           UserProfile?
  Body              UserBody?
  Goal              UserGoal?
  Setting           UserSetting?
  ProgramPreference UserProgramPreference?

  // M:N Profil
  HealthLimitation  UserHealthLimitation[]
  TargetBodyPart    UserGoalPart[]
  AvailableEquipment UserAvailableWorkoutEquipment[]
  WorkoutLocation   UserWorkoutLocation[]

  // 1:N Kullanıcı İçeriği
  ProgramAssignment UserProgramAssignment[]
  ChallengeProgress UserChallengePlan[]
  GeneratedProgram  WorkoutProgram[]      @relation("UserGeneratedPrograms")
}

// --- Auth Modelleri (Değişiklik Yok) ---
model UserLocalCredential {
  userId       String @id @db.UniqueIdentifier
  passwordHash String @db.NVarChar(Max)
  User         User   @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserExternalLogin {
  id            Int    @id @default(autoincrement())
  loginProvider String @db.NVarChar(50)
  providerKey   String @db.NVarChar(255)
  userId        String @db.UniqueIdentifier
  User          User   @relation(fields: [userId], references: [userId], onDelete: Cascade)
  @@unique([loginProvider, providerKey])
}

model RefreshToken {
  refreshTokenId Int      @id @default(autoincrement())
  tokenHash      String   @unique @db.NVarChar(256)
  deviceId       String   @db.NVarChar(255)
  expiresAt      DateTime
  isUsed         Boolean  @default(false)
  createdAt      DateTime @default(now())
  createdByIP    String   @db.NVarChar(45)
  userAgent      String   @db.NVarChar(512)
  userId         String   @db.UniqueIdentifier
  User           User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  @@unique([userId, deviceId])
}

model EmailVerificationToken {
  // ... (Mevcut şema ile aynı)
  verificationTokenId Int      @id @default(autoincrement())
  tokenHash           String   @db.NVarChar(256)
  expiresAt           DateTime
  isUsed              Boolean  @default(false)
  lastSentAt          DateTime @default(now())
  sendCount           Int      @default(1)
  requestIP           String   @db.NVarChar(45)
  userAgent           String   @db.NVarChar(512)
  failedAttempts      Int      @default(0)
  userId              String   @db.UniqueIdentifier
  User                User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model PasswordResetToken {
  // ... (Mevcut şema ile aynı)
  resetTokenId   Int      @id @default(autoincrement())
  tokenHash      String   @db.NVarChar(256)
  expiresAt      DateTime
  isUsed         Boolean  @default(false)
  lastSentAt     DateTime @default(now())
  sendCount      Int      @default(1)
  requestIP      String   @db.NVarChar(45)
  userAgent      String   @db.NVarChar(512)
  failedAttempts Int      @default(0)
  userId         String   @db.UniqueIdentifier
  User           User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
}


// ========================================================================
// 3. KULLANICI PROFİL MODELLERİ (1:1 - Normalleştirildi)
// ========================================================================

model UserProfile {
  userId    String   @id @db.UniqueIdentifier
  firstName String   @db.NVarChar(100)
  lastName  String   @db.NVarChar(100)
  birthDate DateTime @db.Date
  
  // (Öneri 2e) - Zorunlu değil
  genderId  Int?     
  Gender    Gender?  @relation(fields: [genderId], references: [genderId])
  
  User      User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserBody {
  userId        String  @id @db.UniqueIdentifier
  heightCM      Decimal @db.Decimal(5, 2)
  weightKG      Decimal @db.Decimal(5, 2)
  
  // (Öneri 2b) - Normalleştirildi
  activityLevelId Int?
  ActivityLevel   ActivityLevel? @relation(fields: [activityLevelId], references: [activityLevelId])
  
  bodyTypeId    Int?
  BodyType      BodyType?      @relation(fields: [bodyTypeId], references: [bodyTypeId])

  fitnessLevelId Int?
  FitnessLevel   FitnessLevel? @relation(fields: [fitnessLevelId], references: [fitnessLevelId])

  User          User    @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserGoal {
  userId         String   @id @db.UniqueIdentifier
  targetWeightKG Decimal? @db.Decimal(5, 2)
  
  // (Öneri 2b) - Normalleştirildi
  goalTypeId Int
  GoalType   GoalType @relation(fields: [goalTypeId], references: [goalTypeId])

  User           User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserSetting {
  userId            String @id @db.UniqueIdentifier
  preferredUnit     String @db.NVarChar(10)
  preferredLanguage String @db.NVarChar(10) @default("tr")
  theme             String @db.NVarChar(10) @default("system")
  User              User   @relation(fields: [userId], references: [userId], onDelete: Cascade)
}

model UserProgramPreference {
  userId          String  @id @db.UniqueIdentifier
  workoutDuration Int? // 30, 45, 60
  startWithWarmup Boolean @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  // İlişkiler
  User               User               @relation(fields: [userId], references: [userId], onDelete: Cascade)
  workoutEquipmentId String?            @db.UniqueIdentifier // ID Tipi (UUID) güncellendi
  PreferredEquipment WorkoutEquipment?  @relation(fields: [workoutEquipmentId], references: [workoutEquipmentId])
}


// ========================================================================
// 4. KULLANICI İÇERİK MODELLERİ (Takvim, İlerleme - Soft Delete ile)
// ========================================================================

model UserProgramAssignment {
  id        Int       @id @default(autoincrement())
  dayOfWeek Int // 0 = Pazar, 1 = Pazartesi ...
  isRestDay Boolean   @default(false)
  deletedAt DateTime? // (Öneri 2d) - Soft Delete

  // İlişkiler
  userId    String   @db.UniqueIdentifier
  User      User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  
  programId String?  @db.UniqueIdentifier // ID Tipi (UUID) güncellendi
  Program   WorkoutProgram? @relation(fields: [programId], references: [workoutProgramId], onDelete: SetNull, onUpdate: NoAction)

  @@unique([userId, dayOfWeek])
}

model UserChallengePlan {
  userChallengePlanId Int      @id @default(autoincrement())
  progressDay         Int      @default(1)
  status              String   @db.NVarChar(50) // in_progress, completed, abandoned
  startedAt           DateTime @default(now())
  lastActivityAt      DateTime @updatedAt
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  deletedAt           DateTime? // (Öneri 2d) - Soft Delete

  // İlişkiler
  userId          String               @db.UniqueIdentifier
  User            User                 @relation(fields: [userId], references: [userId], onDelete: Cascade)
  challengePlanId String               @db.UniqueIdentifier // ID Tipi (UUID) güncellendi
  ChallengePlan   ChallengeWorkoutPlan @relation(fields: [challengePlanId], references: [challengePlanId], onDelete: Cascade)
}


// ========================================================================
// 5. GENEL İÇERİK ANA MODELLERİ (UUID & Esnek Hedefleme ile)
// ========================================================================

// YENİ (Öneri 3b) - Esnek Hedefleme Tablosu
model ContentAudience {
  id             Int      @id @default(autoincrement())
  contentType    String   // "WorkoutProgram", "ChallengeWorkoutPlan", "HealthLimitation"
  contentId      String   @db.UniqueIdentifier // Hedeflenen içeriğin UUID'si
  
  // Kural Alanları
  genderId       Int?     // 1, 2, 3, 4
  minAge         Int?
  maxAge         Int?
  fitnessLevelId Int?

  // İlişkiler
  Gender       Gender?       @relation(fields: [genderId], references: [genderId])
  FitnessLevel FitnessLevel? @relation(fields: [fitnessLevelId], references: [fitnessLevelId])

  @@index([contentType, contentId]) // Hızlı içerik arama için
}

// (Öneri 2a) - ID'ler UUID'ye güncellendi
model WorkoutProgram {
  workoutProgramId String   @id @default(uuid()) @db.UniqueIdentifier
  difficultyLevel  Int
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  deletedAt        DateTime? // Program şablonları da silinebilir
  
  // Premium Özelliği
  ownerUserId String? @db.UniqueIdentifier
  Owner User? @relation("UserGeneratedPrograms", fields: [ownerUserId], references: [userId], onDelete: NoAction, onUpdate: NoAction)
  // (Öneri 2b) - Normalleştirildi
  goalTypeId       Int?
  GoalType         GoalType? @relation(fields: [goalTypeId], references: [goalTypeId])
  
  bodyTargetId     Int?
  BodyTarget       BodyTarget? @relation(fields: [bodyTargetId], references: [bodyTargetId])
  
  fitnessLevelId   Int?
  FitnessLevel     FitnessLevel? @relation(fields: [fitnessLevelId], references: [fitnessLevelId])

  // İlişkiler
  translations      WorkoutProgramTranslation[]
  programAssignment UserProgramAssignment[]
}

model ChallengeWorkoutPlan {
  challengePlanId String   @id @default(uuid()) @db.UniqueIdentifier
  durationDays    Int
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  // (Öneri 2b) - Normalleştirildi
  fitnessLevelId Int?
  FitnessLevel   FitnessLevel? @relation(fields: [fitnessLevelId], references: [fitnessLevelId])

  // İlişkiler
  translations  ChallengeWorkoutPlanTranslation[]
  day           ChallengeWorkoutPlanDay[]
  userProgress  UserChallengePlan[]
}

model ChallengeWorkoutPlanDay {
  challengeWorkoutPlanDayId String   @id @default(uuid()) @db.UniqueIdentifier
  dayNumber                 Int
  isRestDay                 Boolean  @default(false)
  createdAt                 DateTime @default(now())
  updatedAt                 DateTime @updatedAt

  // (Öneri 2b) - Normalleştirildi
  goalTypeId   Int?
  GoalType     GoalType? @relation(fields: [goalTypeId], references: [goalTypeId])
  
  bodyTargetId Int?
  BodyTarget   BodyTarget? @relation(fields: [bodyTargetId], references: [bodyTargetId])

  // İlişkiler
  challengePlanId String               @db.UniqueIdentifier
  ChallengePlan   ChallengeWorkoutPlan @relation(fields: [challengePlanId], references: [challengePlanId], onDelete: Cascade)
  translations    ChallengeWorkoutPlanDayTranslation[]
  
  @@unique([challengePlanId, dayNumber])
}

model Workout {
  workoutId          String    @id @default(uuid()) @db.UniqueIdentifier
  effectivenessScore Decimal?  @db.Decimal(3, 2)
  metValue           Decimal?  @db.Decimal(4, 2)
  
  // (Öneri 2b) - Normalleştirildi
  workoutTypeId      Int
  WorkoutType        WorkoutType @relation(fields: [workoutTypeId], references: [workoutTypeId])

  // İlişkiler
  workoutCategoryId  String?   @db.UniqueIdentifier
  Category           WorkoutCategory? @relation(fields: [workoutCategoryId], references: [workoutCategoryId], onUpdate: NoAction, onDelete: NoAction)

  workoutEquipmentId String?   @db.UniqueIdentifier
  Equipment          WorkoutEquipment? @relation(fields: [workoutEquipmentId], references: [workoutEquipmentId], onUpdate: NoAction, onDelete: NoAction)

  translations       WorkoutTranslation[]
  asset              WorkoutAsset[]
  targetMuscle       TargetMuscle[]
}

model WorkoutCategory {
  workoutCategoryId String  @id @default(uuid()) @db.UniqueIdentifier
  categoryKey       String  @unique @db.NVarChar(100)
  movementPattern   String? @db.NVarChar(100)
  isCompound        Boolean @default(false)

  // İlişkiler
  workout           Workout[]
  translations      WorkoutCategoryTranslation[] // YENİ
}

model WorkoutAsset {
  assetId    String  @id @default(uuid()) @db.UniqueIdentifier
  assetPhoto String? @db.NVarChar(Max)
  assetVideo String? @db.NVarChar(Max)

  // İlişkiler
  genderId  Int    @default(3) // Varsayılan "all"
  Gender    Gender @relation(fields: [genderId], references: [genderId])
  workoutId String @db.UniqueIdentifier
  Workout   Workout @relation(fields: [workoutId], references: [workoutId], onDelete: Cascade)
}

model Muscle {
  muscleId String @id @default(uuid()) @db.UniqueIdentifier

  // İlişkiler
  workout      TargetMuscle[]
  translations MuscleTranslation[]
}

model HealthLimitation {
  healthLimitationId String @id @default(uuid()) @db.UniqueIdentifier
  // genderId kaldırıldı, ContentAudience'e taşındı (Öneri 3b)

  // İlişkiler
  user         UserHealthLimitation[]
  translations HealthLimitationTranslation[]
}

model GoalBodyPart {
  goalBodyPartId String @id @default(uuid()) @db.UniqueIdentifier
  // genderId kaldırıldı, ContentAudience'e taşındı (Öneri 3b)

  // İlişkiler
  user         UserGoalPart[]
  translations GoalBodyPartTranslation[]
}

model WorkoutEquipment {
  workoutEquipmentId String @id @default(uuid()) @db.UniqueIdentifier

  // İlişkiler
  user              UserAvailableWorkoutEquipment[]
  translations      WorkoutEquipmentTranslation[]
  workout           Workout[]
  userPreference    UserProgramPreference[]
}

model WorkoutLocation {
  workoutLocationId String @id @default(uuid()) @db.UniqueIdentifier

  // İlişkiler
  user         UserWorkoutLocation[]
  translations WorkoutLocationTranslation[]
}


// ========================================================================
// 6. TÜM ÇEVİRİ MODELLERİ (Gruplandırılmış, FK'lar güncellenmiş)
// ========================================================================

// --- Yeni Ana Veri Çevirileri ---
model GoalTypeTranslation {
  goalTypeId   Int
  languageCode String       @db.NVarChar(10)
  name         String       @db.NVarChar(100)
  description  String?      @db.NVarChar(Max)
  GoalType     GoalType     @relation(fields: [goalTypeId], references: [goalTypeId], onDelete: Cascade)
  @@id([goalTypeId, languageCode])
}
model BodyTypeTranslation {
  bodyTypeId   Int
  languageCode String       @db.NVarChar(10)
  name         String       @db.NVarChar(100)
  description  String?      @db.NVarChar(Max)
  BodyType     BodyType     @relation(fields: [bodyTypeId], references: [bodyTypeId], onDelete: Cascade)
  @@id([bodyTypeId, languageCode])
}
model ActivityLevelTranslation {
  activityLevelId Int
  languageCode    String        @db.NVarChar(10)
  name            String        @db.NVarChar(100)
  description     String?       @db.NVarChar(Max)
  ActivityLevel   ActivityLevel @relation(fields: [activityLevelId], references: [activityLevelId], onDelete: Cascade)
  @@id([activityLevelId, languageCode])
}
model BodyTargetTranslation {
  bodyTargetId Int
  languageCode String       @db.NVarChar(10)
  name         String       @db.NVarChar(100)
  description  String?      @db.NVarChar(Max)
  BodyTarget   BodyTarget   @relation(fields: [bodyTargetId], references: [bodyTargetId], onDelete: Cascade)
  @@id([bodyTargetId, languageCode])
}
model WorkoutTypeTranslation {
  workoutTypeId Int
  languageCode  String      @db.NVarChar(10)
  name          String      @db.NVarChar(100)
  description   String?     @db.NVarChar(Max)
  WorkoutType   WorkoutType @relation(fields: [workoutTypeId], references: [workoutTypeId], onDelete: Cascade)
  @@id([workoutTypeId, languageCode])
}
model FitnessLevelTranslation {
  fitnessLevelId Int
  languageCode   String       @db.NVarChar(10)
  name           String       @db.NVarChar(100)
  description    String?      @db.NVarChar(Max)
  FitnessLevel   FitnessLevel @relation(fields: [fitnessLevelId], references: [fitnessLevelId], onDelete: Cascade)
  @@id([fitnessLevelId, languageCode])
}
model WorkoutCategoryTranslation {
  workoutCategoryId String          @db.UniqueIdentifier
  languageCode      String          @db.NVarChar(10)
  name              String          @db.NVarChar(100)
  description       String?         @db.NVarChar(Max)
  WorkoutCategory   WorkoutCategory @relation(fields: [workoutCategoryId], references: [workoutCategoryId], onDelete: Cascade)
  @@id([workoutCategoryId, languageCode])
}

// --- Mevcut & Diğer Yeni Çeviriler ---
model HealthLimitationTranslation {
  healthLimitationId String @db.UniqueIdentifier
  languageCode       String @db.NVarChar(10)
  name               String @db.NVarChar(100)
  description        String? @db.NVarChar(Max)
  HealthLimitation   HealthLimitation @relation(fields: [healthLimitationId], references: [healthLimitationId], onDelete: Cascade)
  @@id([healthLimitationId, languageCode])
}
model GoalBodyPartTranslation {
  goalBodyPartId String       @db.UniqueIdentifier
  languageCode   String       @db.NVarChar(10)
  name           String       @db.NVarChar(100)
  description    String?      @db.NVarChar(Max)
  GoalBodyPart   GoalBodyPart @relation(fields: [goalBodyPartId], references: [goalBodyPartId], onDelete: Cascade)
  @@id([goalBodyPartId, languageCode])
}
model WorkoutEquipmentTranslation {
  workoutEquipmentId String           @db.UniqueIdentifier
  languageCode       String           @db.NVarChar(10)
  name               String           @db.NVarChar(100)
  description        String?          @db.NVarChar(Max)
  WorkoutEquipment   WorkoutEquipment @relation(fields: [workoutEquipmentId], references: [workoutEquipmentId], onDelete: Cascade)
  @@id([workoutEquipmentId, languageCode])
}
model WorkoutLocationTranslation {
  workoutLocationId String          @db.UniqueIdentifier
  languageCode      String          @db.NVarChar(10)
  name              String          @db.NVarChar(100)
  description       String?         @db.NVarChar(Max)
  WorkoutLocation   WorkoutLocation @relation(fields: [workoutLocationId], references: [workoutLocationId], onDelete: Cascade)
  @@id([workoutLocationId, languageCode])
}
model MuscleTranslation {
  muscleId     String @db.UniqueIdentifier
  languageCode String @db.NVarChar(10)
  name         String @db.NVarChar(100)
  Muscle       Muscle @relation(fields: [muscleId], references: [muscleId], onDelete: Cascade)
  @@id([muscleId, languageCode])
}
model WorkoutTranslation {
  workoutId    String  @db.UniqueIdentifier
  languageCode String  @db.NVarChar(10)
  name         String  @db.NVarChar(255)
  description  String? @db.NVarChar(Max)
  Workout      Workout @relation(fields: [workoutId], references: [workoutId], onDelete: Cascade)
  @@id([workoutId, languageCode])
}
model WorkoutProgramTranslation {
  workoutProgramId String         @db.UniqueIdentifier
  languageCode     String         @db.NVarChar(10)
  name             String         @db.NVarChar(255)
  description      String?        @db.NVarChar(Max)
  WorkoutProgram   WorkoutProgram @relation(fields: [workoutProgramId], references: [workoutProgramId], onDelete: Cascade)
  @@id([workoutProgramId, languageCode])
}
model ChallengeWorkoutPlanTranslation {
  challengePlanId String               @db.UniqueIdentifier
  languageCode    String               @db.NVarChar(10)
  name            String               @db.NVarChar(255)
  description     String?              @db.NVarChar(Max)
  ChallengePlan   ChallengeWorkoutPlan @relation(fields: [challengePlanId], references: [challengePlanId], onDelete: Cascade)
  @@id([challengePlanId, languageCode])
}
model ChallengeWorkoutPlanDayTranslation {
  challengeWorkoutPlanDayId String                  @db.UniqueIdentifier
  languageCode              String                  @db.NVarChar(10)
  name                      String                  @db.NVarChar(255)
  description               String?                 @db.NVarChar(Max)
  ChallengeDay              ChallengeWorkoutPlanDay @relation(fields: [challengeWorkoutPlanDayId], references: [challengeWorkoutPlanDayId], onDelete: Cascade)
  @@id([challengeWorkoutPlanDayId, languageCode])
}


// ========================================================================
// 7. İLİŞKİ TABLOLARI (M:N Junction Tables - FK'lar güncellenmiş)
// ========================================================================

model UserHealthLimitation {
  userId             String   @db.UniqueIdentifier
  healthLimitationId String   @db.UniqueIdentifier // ID Tipi (UUID) güncellendi
  User               User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  HealthLimitation   HealthLimitation @relation(fields: [healthLimitationId], references: [healthLimitationId], onDelete: Cascade)
  @@id([userId, healthLimitationId])
}
model UserGoalPart {
  userId         String   @db.UniqueIdentifier
  goalBodyPartId String   @db.UniqueIdentifier // ID Tipi (UUID) güncellendi
  User           User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  GoalBodyPart   GoalBodyPart @relation(fields: [goalBodyPartId], references: [goalBodyPartId], onDelete: Cascade)
  @@id([userId, goalBodyPartId])
}
model UserAvailableWorkoutEquipment {
  userId             String   @db.UniqueIdentifier
  workoutEquipmentId String   @db.UniqueIdentifier // ID Tipi (UUID) güncellendi
  User               User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  WorkoutEquipment   WorkoutEquipment @relation(fields: [workoutEquipmentId], references: [workoutEquipmentId], onDelete: Cascade)
  @@id([userId, workoutEquipmentId])
}
model UserWorkoutLocation {
  userId            String   @db.UniqueIdentifier
  workoutLocationId String   @db.UniqueIdentifier // ID Tipi (UUID) güncellendi
  User              User     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  WorkoutLocation   WorkoutLocation @relation(fields: [workoutLocationId], references: [workoutLocationId], onDelete: Cascade)
  @@id([userId, workoutLocationId])
}
model TargetMuscle {
  workoutId       String   @db.UniqueIdentifier // ID Tipi (UUID) güncellendi
  muscleId        String   @db.UniqueIdentifier // ID Tipi (UUID) güncellendi
  targetIntensity Int? // Örn: 1 (primary), 2 (secondary)
  Workout         Workout  @relation(fields: [workoutId], references: [workoutId], onDelete: Cascade)
  Muscle          Muscle   @relation(fields: [muscleId], references: [muscleId], onDelete: Cascade)
  @@id([workoutId, muscleId])
}